<!DOCTYPE html>
<html>
  <head>
    <script src="phaser.js"></script>
  </head>
  <body>
    <script>
      var config = {
        type: Phaser.AUTO,
        width: 800,
        height: 600,
        parent: "phaser",
        pixelArt: true,
        roundPixels: true,
        physics: {
          default: "arcade",
          arcade: {
            gravity: { y: 200 },
          },
        },
        scene: {
          preload: preload,
          create: create,
          update: update
        },
      };

      var game = new Phaser.Game(config);
      var ground;
      var hero;

      function preload() {
        this.load.audio("background-music","assets/8bit-sound.mp3")
        this.load.image("background", "assets/background/background/background.png")
        this.load.image("ground", "assets/background/background/Ground.png")
        this.load.image("lamp", "assets/background/decorations/lamp.png")
        this.load.image("fence", "assets/background/decorations/fence_1.png")
        this.load.spritesheet("hero", "assets/knight/_Idle.png", { frameWidth: 150, frameHeight: 80 });
      }

      function create() {

        // Need to make a group of images
        this.add.image(400,268, "background").setScale(0.42);
        ground = this.physics.add.staticGroup();
        
        // Creating ground
        ground.create(400,568, "ground").setScale(1.5).refreshBody();
        let background_sound = this.sound.add("background-music")

        // Adding lamp
        this.add.image(580, 489, "lamp").setScale(1.5);
        this.add.image(0, 521, "fence");
        this.add.image(65, 521, "fence");
        this.add.image(130, 521, "fence");
        this.add.image(195, 521, "fence");
        this.add.image(260, 521, "fence");
        this.add.image(325, 521, "fence");
        this.add.image(390, 521, "fence");
        this.add.image(455, 521, "fence");
        this.add.image(520, 521, "fence");
        this.add.image(650, 521, "fence");
        this.add.image(715, 521, "fence");
        this.add.image(780, 521, "fence");
        

        // Adding hero
        hero = this.physics.add.sprite(200,360,"hero")
        hero.setScale(1.5);
        hero.setBounce(0.2);
        hero.setCollideWorldBounds(true);
        this.physics.add.collider(ground, hero);
        // background_sound.play();        
      }

      function update() {
      }
    </script>
    <div id="phaser" style="display:flex; align-items: center; justify-content: center; height: 80vh"></div>
  </body>
</html>
